---
openssh:
  client:
    pkg:
      name: "openssh-client"
      state: "latest"
    config:
      enable_github: false
      kexalgorithms: "curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256"
      passwordauthentication: "no"
      pubkeyauthentication: "yes"
      hostkeyalgorithms: "ssh-ed25519-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-ed25519,ssh-rsa"
      ciphers: "chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr"
      macs: "hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-ripemd160-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-512,hmac-sha2-256,hmac-ripemd160,umac-128@openssh.com"
  server:
    pkg:
      name: "openssh-server"
      state: "latest"
    config:
      usergroup: "sshusers"
      kexalgorithms: "curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256"
      passwordauthentication: "no"
      pubkeyauthentication: "yes"
      ciphers: "chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr"
      macs: "hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-ripemd160-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-512,hmac-sha2-256,hmac-ripemd160,umac-128@openssh.com"
      port: 22
      listenaddress:
        - 0.0.0.0
        - "::"
      loglevel: "INFO"
      permitrootlogin: "without-password"
      strictmodes: "yes"
      challengeresponseauthentication: "no"
      usepam: "yes"
      x11forwarding: "no"
      maxauthtries: 4
      clientaliveinterval: 900
      clientalivecountmax: 0
    regenerate_host_keys: false
    service:
      name: "ssh"
      enabled: true
      state: "started"
